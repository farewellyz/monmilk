<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Daily Love Check-in üíñ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Mitr:wght@300;400;500;600;700&family=Nunito:wght@700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Mitr', 'sans-serif'],
            cute: ['Nunito', 'sans-serif'],
          },
          colors: {
            rose: { 50: '#fff1f2', 100: '#ffe4e6', 200: '#fecdd3', 300: '#fda4af', 400: '#fb7185', 500: '#f43f5e' },
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'bounce-slow': 'bounce 3s infinite',
            'wiggle': 'wiggle 1s ease-in-out infinite',
            'heartbeat': 'heartbeat 1.5s ease-in-out infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            wiggle: {
              '0%, 100%': { transform: 'rotate(-3deg)' },
              '50%': { transform: 'rotate(3deg)' },
            },
            heartbeat: {
              '0%, 100%': { transform: 'scale(1)' },
              '50%': { transform: 'scale(1.1)' },
            }
          }
        }
      }
    }
</script>
<style>
  body {
    background-color: #fff0f5; /* Lavender Blush */
    overflow-x: hidden;
  }

  /* Cute Background Pattern */
  .bg-pattern {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background-image: radial-gradient(#fecdd3 15%, transparent 16%), radial-gradient(#fecdd3 15%, transparent 16%);
    background-size: 60px 60px;
    background-position: 0 0, 30px 30px;
    opacity: 0.3;
  }

  /* Floating Hearts Animation */
  .floating-heart {
    position: fixed;
    color: rgba(255, 182, 193, 0.6);
    animation: floatUp 15s linear infinite;
    z-index: -1;
    font-size: 24px;
  }

  @keyframes floatUp {
    0% { transform: translateY(100vh) scale(0.5) rotate(0deg); opacity: 0; }
    20% { opacity: 0.8; }
    100% { transform: translateY(-20vh) scale(1.2) rotate(360deg); opacity: 0; }
  }

  /* Glass Card */
  .glass-panel {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 2px solid rgba(255, 255, 255, 1);
    box-shadow: 0 20px 50px rgba(255, 182, 193, 0.4);
    border-radius: 40px;
  }

  /* Custom Scrollbar */
  #daysGrid::-webkit-scrollbar { width: 6px; }
  #daysGrid::-webkit-scrollbar-track { background: transparent; }
  #daysGrid::-webkit-scrollbar-thumb { background: #fda4af; border-radius: 10px; }
  
  /* Animations */
  .pop-in { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
  @keyframes popIn {
    from { opacity: 0; transform: scale(0.5); }
    to { opacity: 1; transform: scale(1); }
  }

  .confetti-piece {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: #ffd700;
    animation: confetti-fall 3s linear forwards;
  }
  @keyframes confetti-fall {
    0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }
</style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 text-slate-700">

  <!-- Background Elements -->
  <div class="bg-pattern"></div>
  <div id="heartContainer"></div>

  <!-- Main App -->
  <div id="mainApp" class="glass-panel w-full max-w-[400px] p-6 relative transform transition-all duration-500 opacity-0 scale-95">
    
    <!-- Mascot Section -->
    <div class="absolute -top-16 left-1/2 transform -translate-x-1/2 w-32 h-32 flex items-center justify-center z-20">
      <div id="mascot" class="text-[5rem] filter drop-shadow-xl cursor-pointer transition-transform hover:scale-110 active:scale-90 animate-float">
        üêª
      </div>
      <!-- Speech Bubble -->
      <div id="speechBubble" class="absolute -right-24 top-0 bg-white px-4 py-2 rounded-2xl rounded-bl-none shadow-lg text-sm font-bold text-rose-500 transform transition-all duration-300 opacity-0 scale-75 border-2 border-rose-100 whitespace-nowrap">
        ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏±‡∏ö! ‚ù§Ô∏è
      </div>
    </div>

    <!-- Header -->
    <div class="mt-14 text-center mb-6">
      <h1 class="text-3xl font-bold text-rose-500 tracking-tight drop-shadow-sm">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏Å 1001 ‡∏ß‡∏±‡∏ô</h1>
      <p class="text-rose-400 text-sm mt-1 font-medium">‡∏™‡∏∞‡∏™‡∏°‡∏ß‡∏±‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ô‡∏∞</p>
    </div>

    <!-- Progress Bar -->
    <div class="mb-6">
      <div class="flex justify-between text-xs font-bold text-rose-400 mb-2 px-1">
        <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</span>
        <span id="progressText">0%</span>
        <span>‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ</span>
      </div>
      <div class="h-6 w-full bg-rose-100 rounded-full p-1 shadow-inner">
        <div id="progressBar" class="h-full bg-gradient-to-r from-rose-400 to-pink-500 rounded-full transition-all duration-1000 relative" style="width: 0%">
          <div class="absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 bg-white w-2 h-2 rounded-full shadow"></div>
        </div>
      </div>
      <div class="text-center mt-2 font-bold text-slate-600">
        ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <span id="dayCountDisplay" class="text-2xl text-rose-500 mx-1">207</span>
      </div>
    </div>

    <!-- Calendar Grid -->
    <div id="daysGrid" class="grid grid-cols-7 gap-2 max-h-[280px] overflow-y-auto p-2 mb-6 scroll-smooth">
      <!-- Generated by JS -->
    </div>

    <!-- Message Box -->
    <div id="messageBox" class="min-h-[3rem] flex items-center justify-center text-center mb-4 px-4 py-2 bg-rose-50 rounded-2xl border border-rose-100 text-rose-600 font-medium text-sm transition-all">
      ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏£‡∏∂‡∏¢‡∏±‡∏á‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á? ‚ú®
    </div>

    <!-- Action Button -->
    <button id="checkinBtn" class="group relative w-full bg-gradient-to-r from-rose-400 to-pink-500 text-white font-bold text-lg py-4 rounded-3xl shadow-lg shadow-rose-200 transform transition-all hover:-translate-y-1 hover:shadow-xl active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none overflow-hidden">
      <div class="absolute inset-0 w-full h-full bg-white/20 group-hover:w-full transition-all duration-500 ease-out transform -translate-x-full group-hover:translate-x-0 skew-x-12"></div>
      <span class="relative flex items-center justify-center gap-2">
        <span class="animate-heartbeat">üíñ</span> ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
      </span>
    </button>

  </div>

<script>
  // --- Configuration ---
  const TOTAL_DAYS = 1001;
  const START_DAY = 207; // Configured start day
  const STORAGE_KEY_COUNT = 'dailyCheckinCount_v4'; // Changed key for fresh start
  const STORAGE_KEY_DATE = 'dailyLastCheckin_v4';
  
  // --- Elements ---
  const els = {
    app: document.getElementById('mainApp'),
    grid: document.getElementById('daysGrid'),
    btn: document.getElementById('checkinBtn'),
    msg: document.getElementById('messageBox'),
    mascot: document.getElementById('mascot'),
    bubble: document.getElementById('speechBubble'),
    bar: document.getElementById('progressBar'),
    progressText: document.getElementById('progressText'),
    dayCount: document.getElementById('dayCountDisplay'),
    heartContainer: document.getElementById('heartContainer')
  };

  // --- State ---
  let state = {
    count: parseInt(localStorage.getItem(STORAGE_KEY_COUNT)) || START_DAY,
    lastDate: localStorage.getItem(STORAGE_KEY_DATE),
  };

  const sweetMessages = [
    "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Ñ‡∏ô‡∏î‡∏µ! üíñ",
    "‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏ô‡∏∞‡∏à‡∏∏‡πä‡∏ö‡πÜ üòò",
    "‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢‡∏£‡∏π‡πâ‡∏°‡∏±‡πâ‡∏¢? üêª",
    "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ ‚ú®",
    "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ üåπ",
    "‡∏™‡∏π‡πâ‡πÜ ‡∏ô‡∏∞‡∏Ñ‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á ‚úåÔ∏è",
    "‡∏á‡∏π‡πâ‡∏¢‡∏¢‡∏¢ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß! üéâ",
    "‡πÅ‡∏ü‡∏ô‡πÉ‡∏Ñ‡∏£‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏Å‡πà‡∏á‡∏à‡∏±‡∏á ü•∞"
  ];

  const mascots = {
    idle: "üêª",
    happy: "ü•∞",
    love: "üòç",
    celebrate: "ü•≥"
  };

  // --- Initialization ---
  function init() {
    createFloatingHearts();
    renderGrid();
    updateUI();
    
    // Animate Entry
    setTimeout(() => {
      els.app.classList.remove('opacity-0', 'scale-95');
      els.app.classList.add('opacity-100', 'scale-100');
    }, 100);

    // Mascot Interaction
    els.mascot.addEventListener('click', () => {
      mascotSay("‡∏£‡∏±‡∏Å‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤‡∏ö ‚ù§Ô∏è");
      playMascotAnim('wiggle');
    });

    // Check if already checked in
    if (isCheckedInToday()) {
      disableCheckin("‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞‡∏Ñ‡∏ô‡∏î‡∏µ üåô");
    }
  }

  // --- Core Logic ---
  function isCheckedInToday() {
    if (!state.lastDate) return false;
    const last = new Date(state.lastDate);
    const now = new Date();
    return last.getDate() === now.getDate() && 
           last.getMonth() === now.getMonth() && 
           last.getFullYear() === now.getFullYear();
  }

  function handleCheckin(e) {
    if (isCheckedInToday()) return;

    // Logic
    state.count++;
    state.lastDate = new Date().toISOString();
    localStorage.setItem(STORAGE_KEY_COUNT, state.count);
    localStorage.setItem(STORAGE_KEY_DATE, state.lastDate);

    // Visuals
    createParticles(e);
    renderGrid();
    updateUI();
    
    // Feedback
    const randomMsg = sweetMessages[Math.floor(Math.random() * sweetMessages.length)];
    disableCheckin(randomMsg);
    mascotSay("‡πÄ‡∏¢‡πâ! ‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢! üéâ");
    setMascot(mascots.celebrate);

    // Scroll to day
    setTimeout(() => {
      const dayEl = document.getElementById(`day-${state.count}`);
      if(dayEl) {
        dayEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
        dayEl.classList.add('scale-125');
        setTimeout(() => dayEl.classList.remove('scale-125'), 300);
      }
    }, 100);

    // Rewards
    if (state.count % 100 === 0 || state.count % 28 === 0 || state.count % 7 === 0) {
      triggerConfetti();
    }
  }

  // --- UI Functions ---
  function updateUI() {
    // Update Text
    els.dayCount.textContent = state.count;
    
    // Update Bar
    const percent = Math.min((state.count / TOTAL_DAYS) * 100, 100);
    els.bar.style.width = `${percent}%`;
    els.progressText.textContent = `${Math.floor(percent)}%`;

    // Mascot State
    if (!isCheckedInToday()) {
      setMascot(mascots.idle);
    } else {
      setMascot(mascots.love);
    }
  }

  function renderGrid() {
    els.grid.innerHTML = '';
    
    for (let i = 1; i <= TOTAL_DAYS; i++) {
      const div = document.createElement('div');
      div.id = `day-${i}`;
      div.className = `
        aspect-square rounded-xl flex items-center justify-center text-xs font-bold transition-all duration-300 relative
        ${i <= state.count 
          ? 'bg-rose-400 text-white shadow-md shadow-rose-200' 
          : 'bg-white/50 text-rose-300 border border-white'}
      `;

      // Special styling for checked items
      if (i <= state.count) {
        div.innerHTML = 'üíñ';
        if(i === state.count) div.classList.add('animate-bounce-slow');
      } else {
        div.textContent = i;
      }

      // Reward Days Marker
      if (i % 100 === 0) div.classList.add('ring-2', 'ring-yellow-400');
      else if (i % 28 === 0) div.classList.add('ring-2', 'ring-purple-300');

      els.grid.appendChild(div);
    }

    // Scroll to current
    setTimeout(() => {
        const target = document.getElementById(`day-${state.count}`);
        if(target) target.scrollIntoView({ block: 'center' });
    }, 500);
  }

  function disableCheckin(msg) {
    els.btn.disabled = true;
    els.btn.innerHTML = `<span class="opacity-80">‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ô‡∏∞ üëã</span>`;
    els.msg.innerHTML = `<span class="text-rose-500 font-bold animate-pulse">${msg}</span>`;
  }

  // --- Mascot System ---
  function setMascot(emoji) {
    els.mascot.textContent = emoji;
  }
  
  function mascotSay(text) {
    els.bubble.textContent = text;
    els.bubble.classList.remove('opacity-0', 'scale-75');
    els.bubble.classList.add('opacity-100', 'scale-100');
    
    setTimeout(() => {
      els.bubble.classList.remove('opacity-100', 'scale-100');
      els.bubble.classList.add('opacity-0', 'scale-75');
    }, 3000);
  }

  function playMascotAnim(animClass) {
    els.mascot.classList.add(animClass);
    setTimeout(() => els.mascot.classList.remove(animClass), 1000);
  }

  // --- Effects ---
  function createFloatingHearts() {
    for(let i=0; i<15; i++) {
      const heart = document.createElement('div');
      heart.className = 'floating-heart';
      heart.textContent = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üíñ';
      heart.style.left = `${Math.random() * 100}vw`;
      heart.style.animationDelay = `${Math.random() * 10}s`;
      heart.style.fontSize = `${Math.random() * 20 + 10}px`;
      els.heartContainer.appendChild(heart);
    }
  }

  function createParticles(e) {
    const rect = els.btn.getBoundingClientRect();
    const center = { x: rect.left + rect.width/2, y: rect.top + rect.height/2 };
    
    for(let i=0; i<12; i++) {
      const p = document.createElement('div');
      p.style.position = 'fixed';
      p.style.left = center.x + 'px';
      p.style.top = center.y + 'px';
      p.style.fontSize = '20px';
      p.style.pointerEvents = 'none';
      p.style.zIndex = 100;
      p.textContent = ['üíñ','‚ú®','üå∏','üêª'][Math.floor(Math.random()*4)];
      
      const angle = (Math.PI * 2 * i) / 12;
      const velocity = 100;
      const tx = Math.cos(angle) * velocity;
      const ty = Math.sin(angle) * velocity;

      p.animate([
        { transform: 'translate(0,0) scale(0)', opacity: 1 },
        { transform: `translate(${tx}px, ${ty}px) scale(1.5)`, opacity: 0 }
      ], { duration: 800, easing: 'ease-out' }).onfinish = () => p.remove();
      
      document.body.appendChild(p);
    }
  }

  function triggerConfetti() {
    for(let i=0; i<50; i++) {
      const c = document.createElement('div');
      c.className = 'confetti-piece';
      c.style.left = Math.random() * 100 + 'vw';
      c.style.backgroundColor = ['#ff69b4', '#ffd700', '#87ceeb', '#ffb6c1'][Math.floor(Math.random()*4)];
      c.style.animationDuration = (Math.random() * 2 + 2) + 's';
      document.body.appendChild(c);
      setTimeout(() => c.remove(), 4000);
    }
  }

  // --- Listeners ---
  els.btn.addEventListener('click', handleCheckin);
  window.addEventListener('load', init);

</script>
</body>
</html>